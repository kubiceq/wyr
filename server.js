
let otazky = ["testovacia otazka",
"druha otazka",
"tretia otazka"]

let prvySetOtazok = ["Would you rather Have a dog with a cat’s personality or a cat with a dog’s personality?",
  "If you were reborn in a new life, would you rather be alive in the past or future?",
  "Would you rather eat no candy at Halloween or no turkey at Thanksgiving?",
  "Would you rather date someone you love or date someone who loves you?",
  "Would you rather lose the ability to lie or believe everything you’re told?",
  "Would you rather be free or be totally safe?",
  "Would you rather Eat shit that tasted like chocolate, or eat chocolate that tasted like crap?",
  "Would you rather Look 10 years older from the neck up, or the neck down?",
  "Would you rather Be extremely underweight or extremely overweight?",
  "Would you rather Experience the beginning of planet earth or the end of planet earth?",
  "Would you rather have an incredibly annoying high-pitched voice or a really deep manly voice?",
  "Would you rather have a full-blown moustache for a year or permanently hairy legs for ten years?",
  "Would you rather give up your phone or only wear Crocs for the rest of your life?",
  "Would you rather clog the toilet on a first date or first day at a new job?",
  "Would you rather have an abnormally big toe or an abnormally big ear?",
  "Would you rather be three feet tall or eight feet tall?",
  "Would you rather have to be naked at work for an hour or be dropped off two miles from your house whilst you're naked and you have to try and get home?",
  "Would you rather smell like cheese (which has been left in the sun) or a hamster cage (which hasn't been cleaned for a fortnight)?",
  "Would you rather be a mad genius or popular but dim?",
  "Would you rather a nose that never stops growing or ears that never stop growing?",
  "Would you rather whip or be whipped?",
  "Would you rather have your hair pulled or your back scratched?",
  "Would you rather dominate or be dominated?",
  "Would you rather have a cupboard full of sex toys or kinky outfits?",
  "Would you rather sleep with someone on the first date or wait for six months?",
  "Would you rather have unbelievable sex that lasts ten minutes or average sex that lasts an hour?",
  "Would you rather your partner be kinky or romantic?",
  "Would you rather swallow or spit?",
  "Would you rather have sex with the light on or the light off?",
  "Would you rather have sex in the shower or on the kitchen table?",
  "Would you rather accidentally send a naughty picture to your dad or your boss?",
  "Would you rather give up sex or give up food?",
  "Would you rather walk in on your parents having sex or have them walk in on you having sex?",
  "Would you rather be stuck in a phone box with ten snakes or ten tarantulas?",
  "Would you rather say your ex's name during sex or your partner's best friend's name?",
  "Would you rather have the face of a pensioner but the body of a twenty-year-old or the body of a pensioner and the face of a twenty-year-old?",
  "Would you rather be funny but really stupid or boring but really smart?",
  "Would you rather be famous or rich?",
  "Would you rather find the love of your life or find a million pounds?",
  "Would you rather be able to travel everywhere for free or eat everywhere for free?",
  "Would you rather have arms as long as Mr. Tickle or legs as short as E.T?",
  "Would you rather empty a swimming pool using just a fork or get in a swimming pool for half an hour with a jellyfish?",
  "Would you rather drink soup out of a farmer's welly or from a binman's sock?",
  "Would you rather have no sense of smell or no sense of taste?",
  "Would you rather have your name tattooed on your forehead or have no front teeth?"];

  const druhySetOtazok = [ " Would you rather End death due to car accidents or end terrorism?",
" Would you rather Leave your unemployed son homeless or pay for his dr#g habits and illegal activities?",
" Would you rather End the life a single human being or 100 cute baby animals?",
" Would you rather End hunger or end your hunger?",
" Would you rather Skinny dip with your classmate or with a stranger?",
" Would you rather give up your love life or work life?",
" Would you rather live in an amusement park or a zoo?",
" Would you rather be a millionaire by winning the lottery or by working 100 hours a week?",
" Would you rather read minds or accurately predict future?",
" Would you rather eat only pizza for 1 year or eat no pizza for 1 year?",
" Would you rather visit 100 years in the past or 100 years in the future?",
" Would you rather Be able to choose your bridesmaid dress or never have to be a bridesmaid again?",
" Would you rather Have your gynecologist use a speculum that is too large or a speculum that is cold?",
" Would you rather Have girl’s night with Oprah Winfrey or Hillary Clinton?",
" Would you rather Have painful cramps again or never have to shave again?",
" Would you rather Be catcalled or be treated like a human being?",
" Would you rather Go through a whole day with a very visible panty line or with lipstick on your teeth?",
" Would you rather Be asked if you are PMSing every single day or be told to stop being so sensitive every day?",
" Would you rather Wear a push-up bra all day long or stiletto heels all day long?",
" Would you rather Have an entire eyebrow accidentally waxed off or Get a rash from a poor bikini wax job?",
" Would you rather Get your period at the beach or on a date?",
" Would you rather Live in a world without the movie “Bridesmaids” or without “Mean Girls”?",
" Would you rather Have an awful hair day or go through the whole day with your bra’s underwire poking you?",
" Would you rather Have tampons for fingers or have pubic hair for teeth.",
" Would you rather love your spouse or be loved by your spouse?",
" Would you rather make out on your first date or wait for the right time?",
" Would you rather have physical intimacy or no true love?",
" Would you rather have large assets and a disfigured body or have smaller assets with a fantastic body?",
" Would you rather not put makeup again or not look at yourself again?",
" Would you rather have your menstrual cycle on your first night or your honeymoon?",
" Would you rather get with your boss to get promoted or give up the promotion?",
" Would you rather be the subject matter of gossip or never being talked about at all?",
" Would you rather be married to someone extremely attractive or be someone who is extremely attractive?",
" Would you rather Have one partner or multiple partners? (via) Would you rather Talk with me about someone you fancy or fantasize about it secretly in your mind?",
" Would you rather Watch a girl on girl or guy on guy video, to turn yourself on?",
" Would you rather Watch something erotic with me, or read an erotica loud, while touching me?",
" Would you rather Have it with the lights on or off?",
" Would you rather Pay for having s#x, or get paid for it?",
" Would you rather have s#x with my best friend, or with your best friend?",
" Would you rather Swallow or spit?",
" Would you rather Be on top or underneath?",
" Would you rather Have s#x with someone or watch someone having it?",
" Would you rather Have s#x in the morning or at night?",
" Would you rather Bring another person in bed or cheat on me?",
" Would you rather Receive an oral or give one?",
" Would you rather do romantic things or try out some new kinky ideas?",
" Would you rather End a first date with s#x or with a passionate kiss?",
" Would you rather be caught cheating or catch your spouse cheating?",
" Would you rather let your significant other sleep with your best friend or sleep with your significant other’s best friend?",
" Would you rather let your spouse date your best friend or your arch enemy?",
" Would you rather confess your crimes in front of your children or commit the crime in front of your children?",
" Would you rather Kiss or girl or be kissed by a girl? (via) Would you rather Have a long-term relationship or flings?",
" Would you rather Have an average girl with a great personality or a hot girl?",
" Would you rather Stay in or go out for a date?",
" Would you rather Check out a girl from the back or the front?",
" Would you rather Wear comfortable clothes or fashionable clothes?",
" Would you rather Go to a bar, a club, a house party, or just stay home?",
" Would you rather Find true love or be rich?",
" Would you rather See a girl in shorts, or in a skirt?",
" Would you rather Spend $5,000 on traveling or on a physical item like a TV?",
" Would you rather Not brush your teeth for ten days or not shower for ten days?",
" Would you rather Kiss a girl on the first date or wait?",
" Would you rather Be a tutor for underprivileged kids or volunteer at a homeless shelter or Would you rather Date me or be my friend?",
" Would you rather Go to an expensive restaurant or a cheaper relaxed atmosphere where the food is equally good?",
" Would you rather weave a web of lies for your girlfriend or tell her the whole truth?",
" Would you rather continue your relationship or leave if you find your girlfriend is diagnosed with a terminally fatal disease?",
" Would you rather eat the food prepared by your mom or your girlfriend?",
" Would you rather take your girlfriend out for a date or snuggle her in your arms and stay indoors?",
" Would you rather see your girlfriend with or without makeup?",
" Would you rather leave your girlfriend if she is not good in bed or continue living with her?",
" Would you rather sleep with your girlfriend or get paid $10000 not to?",
" Would you rather have an obsessed girlfriend or a hot, cheating one?",
" Would you rather Be poor and good looking or wealthy and ugly? (via) Would you rather Be hairy or completely bald?",
" Would you rather Be 4’5″ or 7’7″?",
" Would you rather Be blind or deaf?",
" Would you rather Be short and well built or tall and fat?",
" Would you rather Take a guaranteed $100,000 or a 50/50 chance at $1,000,000?",
" Would you rather Eat healthily or exercise regularly?",
" Would you rather Be super strong or super fast?",
" Would you rather Be poor and find true love or be rich?",
" Would you rather Lose half your hair or lose half your hearing?",
" Would you rather Work hard at the job you love or slack off at a boring job?",
" Would you rather Look weak and be strong or look strong and be weak?",
" Would you rather Have a third wrist or a third eye?",
" Would you rather Be as wide as you are tall, or as tall as you are wide?",
" Would you rather Age from the neck up or the neck down only?",
" Would you rather join the army or be an athlete?",
" Would you rather go on a free, fully paid dream vacation or be with someone you love in your home?",
" Would you rather be the richest person in the World or the smartest?",
" Would you rather own your dream car or have never-ending knowledge?",
" Would you rather create history or delete it?",
" Would you rather have a high profile job with no family for life or an average job with a family to live by?",
" Would you rather have a crush on ugly people or have ugly people have a crush on you?",
" Would you rather grab the front or the back of a girl when invisible?",
" Would you rather Be a cow or a chicken?",
" Would you rather have no taste buds or be color blind?",
" Would you rather Eat everything you see or lick everything you see?",
" Would you rather Have a foot long nose or a foot long tongue?",
" Would you rather Have a baby at 10 or a baby at 60?",
" Would you rather Be in jail for ten years or be in the coma for 20 years?",
" Would you rather Have no brother or no sister?",
" Would you rather Be invisible or be fast?",
" Would you rather Look like a fish or smell like a fish?",
" Would you rather Play on Minecraft or play FIFA?",
" Would you rather Fight 100 duck-sized horses or 1 horse-sized duck?",
" Would you rather Have a grapefruit-sized head or a head the size of a watermelon?",
" Would you rather Be a tree or have to live in a tree for the rest of your life?",
" Would you rather Live in space or under the sea?",
" Would you rather lose your sense of touch or your sense of smell?",
" Would you rather be Donald Trump or George Bush?",
" Would you rather Have no hair or be completely hairy?",
" Would you rather wake up in the morning looking like a giraffe or a kangaroo?",
" Would you rather have a booger hanging from your nose for the rest of your life or earwax planted on your earlobes?",
" Would you rather Have a sumo wrestler on top of you or yourself on top of him?",
" Would you rather Stop using YouTube or stop using Instagram? (via) Would you rather Check your email first every morning or Check your social networks first every morning?",
" Would you rather Lose your keys or forget your cell phone?",
" Would you rather Only have access to YouTube on the Internet or only have access to games on the Internet?",
" Would you rather Eat the same food for the rest of your life or never use Instagram again?",
" Would you rather Watch TV all the time or not watch TV at all?",
" Would you rather Have slow but unlimited internet or Paid but Limited Internet?",
" Would you rather Give up shopping for three or give up emoji for three months?",
" Would you rather Lose all your contacts or lose $100?",
" Would you rather Eat an entire stick of butter or send an embarrassing email to your entire company?",
" Would you rather Be stung by a jellyfish or give up Facebook for a week?",
" Would you rather Never have internet access or be a professional clown?",
" Would you rather Create a super successful app or go on tour with Beyoncé?",
" Would you rather Not use email for a week or feel hungover for a week?",
" Would you rather have an iPod fitted in your mind and listen to any music of your choice, anytime or watch your dreams alive on television?",
" Would you rather give up search engines or social media applications?",
" Would you rather play you in Minecraft or Super Mario?",
" Would you rather have a lifelong free subscription of iTunes or App Store?",
" Would you rather have free internet for life or free food?",
" Would you rather live without a cell phone or news?",
" Would you rather have your brain transplanted into a robot or an animal of your choice?",
" Would you rather infinite battery life for your cell phone or infinite fuel for your car?",
" Would you rather burn all your books or buy a Kindle or an eBook reader?",
" Would you rather surf the internet or shop till you drop?",
" Would you rather give up your snazzy home theater or your PlayStation?"
];

  const tretiSetOtazok = ["Would you rather never receive oral again or never smoke weed again?",
"Would you rather send nudes to your boss or to your parents?",
"Would you rather sneeze every time you orgasm, or orgasm every time you sneeze?",
"Would you rather spit or swallow?",
"Would you rather only be able to be on the bottom during sex, or only on the top? ",
"Would you rather be cheated on by a partner, or cheat on a partner?",
"Would you would rather get spanked or do the spanking?",
"Would you rather never wear underwear again or never wear socks again?",
"Would you rather walk in on your parents having sex or have your parents walk in on you having sex?"
];

let counter = 0;
let ktoJeNaTahu = 0;

const path = require('path');
const http = require('http');
const express = require('express');
const socketio = require('socket.io');
const formatMessage = require('./utils/messages');
const {
  userJoin,
  getCurrentUser,
  userLeave,
  getRoomUsers,
  jeNaTahu,
  getNumberOfRoomUsers
} = require('./utils/users');

const app = express();
const server = http.createServer(app);
const io = socketio(server);

// Set static folder
app.use(express.static(path.join(__dirname, 'public')));

const botName = 'RoboAdmin';

// Run when client connects
io.on('connection', socket => {
  socket.on('joinRoom', ({ username, room }) => {
    const user = userJoin(socket.id, username, room);
    console.log(user);
    socket.join(user.room);

    // Welcome current user
    socket.emit('message', formatMessage(botName, 'Vitaj v chate'));

    // Broadcast when a user connects
    socket.broadcast
      .to(user.room)
      .emit(
        'message',
        formatMessage(botName, `${user.username} sa pripojil/a`)
      );

    // Send users and room info
    io.to(user.room).emit('roomUsers', {
      room: user.room,
      users: getRoomUsers(user.room)
    });


      jeNaTahu(getNumberOfRoomUsers(user.room)-1);

    // Send users and room info
    io.to(user.room).emit('roomUsers', {
      room: user.room,
      users: getRoomUsers(user.room)
    });
  });

  socket.on('otazka', msg => {
    const user = getCurrentUser(socket.id);
    console.log(msg);
    //io.to(user.room).emit('otazka',getRoomUsers(user.room));//testing potom treba vymenit za spodny
    io.to(user.room).emit('otazka', novaOtazka());
    ktoJeNaTahu = ktoJeNaTahu + 1;
    console.log("ktoJeNaTahu ");
    console.log(ktoJeNaTahu);

    if (ktoJeNaTahu === getNumberOfRoomUsers(user.room)) {
      ktoJeNaTahu = 0;
    }
    jeNaTahu(ktoJeNaTahu)
    // Send users and room info
    io.to(user.room).emit('roomUsers', {
      room: user.room,
      users: getRoomUsers(user.room)
    });
  });

  socket.on('novaIzba', msg => {
    console.log(msg);
  });

  socket.on('setOtazok', msg => {
    const user = getCurrentUser(socket.id);
    console.log(msg);
    if (msg === "prvySetOtazok") {
        otazky = prvySetOtazok;
        io.to(user.room).emit('otazka', titulnaOtazka("Prvy Set"));
    }
    else if (msg === "druhySetOtazok") {
        otazky = druhySetOtazok;
        console.log('druhy set');
        io.to(user.room).emit('otazka', titulnaOtazka("Druhy Set"));
    }
    else if (msg === "tretiSetOtazok") {
        otazky = tretiSetOtazok;
        io.to(user.room).emit('otazka', titulnaOtazka("Treti Set"));
    }
  });

  // Listen for chatMessage
  socket.on('chatMessage', msg => {
    const user = getCurrentUser(socket.id);
    console.log(msg);

    io.to(user.room).emit('message', formatMessage(user.username, msg));
  });

  // Runs when client disconnects
  socket.on('disconnect', () => {
    const user = userLeave(socket.id);

    if (user) {
      io.to(user.room).emit(
        'message',
        formatMessage(botName, `${user.username} nas opustil/a`)
      );

      // Send users and room info
      io.to(user.room).emit('roomUsers', {
        room: user.room,
        users: getRoomUsers(user.room)
      });
    }
  });

});

function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
}

//najde nahodnu otazku a vrati otazku, pocet doteraz otazok a pocet vsetkych otazok
function novaOtazka() {
  counter = counter + 1;
  let index = getRandomInt(0,otazky.length);
  let dlzka = otazky.length;
  let pom =  otazky[index];
  otazky.splice(index,1);
  console.log(pom);
  return {pom, counter, dlzka};
}

//pri pouziti noveho balicku vrati otazku so specifickym nazvom a nastavi counter na 0
function titulnaOtazka(titulok) {
  counter = 0;
  let dlzka = otazky.length;
  pom = titulok;
  return {pom, counter, dlzka};
}




const PORT = process.env.PORT || 3000;

server.listen(PORT, () => console.log(`Server running on port ${PORT}`));
